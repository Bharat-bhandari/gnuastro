2015-05-23  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* lib/mode.c (modesymmetricity): Corrrected topi to account for
	the case when 2*mi is larger than size.

	* src/subtractsky/args.h: --numnearest and --kernelwidth moved to
	the `Mesh grid' part of the help output. --checksmoothing and
	--checkinterpolation also moved to the `Mesh grid' part.

	* lib/mesh.c (checkgarray): Modified to show both the full, or
	contiguous over full image, garray and the default one which is
	contiguous only over each channel.

2015-05-20  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* lib/mode.c (modesymmetricity): Corrected topi to the end of the
	mirror distribution.
	(modesymmetricity): If no diff point is found, the end of the
	mirror distribution is used. Before it was the end of the data!
	(valuefromsym): af set to the quantile of the mirror distribution.

2015-05-18  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convolve/convolve.c (complextoreal): Changed the two states
	to three to add only conerting the real part of an array.

2015-05-15  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convolve/convolve.c (removepaddingcorrectroundoff): The
	limit to check for floating point errors is now set by a macro and
	changed to 1e-10 instead of 1e-17.

	* lib/statistics.c (sigmaclip_converge): Now, there is a limit on
	the number of times to try for convergence.

	* lib/mode.c (makemirrorplots): All the output paramters are now
	given as arguments so the output can be fully configured from the
	outside. Also, the method that it sets the plot ranges is now
	better configurable.

	* include/mode.h (MODESYMGOOD): Changed to 0.2 from 0.15 based on
	new simulation tests.

2015-05-11  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* lib/statistics.c (setbins): Changed method to find the bin that
	has the value zero within it. Before it would just choose the
	first bin with a positive value. But now, it will check the signs
	of the two interval sides of the bin and when ever the
	multiplication becomes negative, that bin is chosen.
	(histogram): Changed so the last bin is a closed bin, not half
	open like the rest of the histogram bins. This also includes
	floating point rounding error.
	(cumulativefp): Same as the histogram function.
	(sigmaclip_certainnum): Printing is now an option.
	(sigmaclip_converge): Printing is now an option.

	* lib/mode.c (makemirrorplots): New name for the old
	savemodeplots.

	* include/mode.h: Changed input arguments to
	modeindexinsorted. Plots can now be made through the separate
	makemirrorpolots function.

2015-05-05  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/subtractsky/ui.c (preparearrays): Moved the function that
	reads any input as float and incorporates the mask into it.

	* include/fixedstringmacros.h (MOREHELPINFO): Removed long
	explanation about help-gnuastro. Instead an info link to the part of
	the manual that introduces it was included.

2015-05-03  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* include/fixedstringmacros.h (MOREHELPINFO): Corrected to include
	help-gnuastro mailing list.

	* doc/style.css (a:hover): Changed to bright orange color.
	(a:active): Changed to dark orange.

2015-04-24  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mkprof/oneprofile.c (makepixbypix): When in circumference
	mode, if the truncation radius is reached, it is filled with the
	profile value. This is done so very elongated profiles can at
	least show a one pixel circumference.

	* src/mkprof/main.h (MINCIRCUMWIDTH): Changed to 0.5f.

	* lib/checkset.c (doublelvalue): Corrected bad value report when
	options are called.

2015-04-21  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mkprof/ui.c (freeandreport): Avoided double-free by only
	freeing mergeedimgname when it is not equal to output.

	* src/mkprof/oneprofile.c (makepixbypix): Will only do monte carlo
	integration when the profile is not a constant value.
	(setprofparams): Changed the function of point to `Fixed'.

	* src/mkprof/mkprof.c (write): Changed to replace and read from an
	image and add profiles on that.

	* lib/statistics.c: All float and double functions can now work
	with NaN too.

	* src/mkprof/ui.c (setparams): Catalog is always given, no need to
	check.

	* doc/gnuastro.texi: Removed all "Future updates ..." subsections
	in the manual. They are now managed in the Gnuastro project
	webpage on Savannah.

2015-04-13  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* lib/fitsarrayvv.c (updatekeys): When no value is given, it will
	use fits_update_key_null.
	(readwcs): Uses fits_free_memory instead of clib's free.

2015-04-06  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mkprof/mkprof.c: Corrected condition when a thread would
	finish `build' profiles but the last set of its profiles wouldn't
	pass onto `write'.

	* src/mknoise/: Changed background flux unit to magnitudes, not
	flux.

	* THANKS: Added institutions which also helped.

2015-04-03  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* lib/fitsarrayvv.c: Changed all occurences of `nul' or `NUL' to
	`blank' or `BLANK'. The FITS standard defines a BLANK keyword for
	integer types.
	(copyrightandend): Will now right extra headers.
	(arraytofitsimg): Can now accept header to write to output.

	* include/fitsarrayvv.h: Changed all `NUL' macros to `BLANK'.

2015-04-02  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* lib/fitsarrayvv.c (changetype): Round floating point input types
	for integer output types.
	(arraytofitsimg): Added numblank as a variable, to deal with blank
	pixels.

	* src/imgwarp/imgwarp.c (imgwarppreparations): Coorected the point
	(1.0f, 1.0f) to be center of the first pixel, not zero.

	* lib/fitsarrayvv.c (copyrightandend): Removed the Copyright
	notice of Gnuastro from the output image header. Since it might be
	confused with a copyright on the data its self.

2015-04-01  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/imgwarp/args.h: Temporarily removed the wrap option. Will be
	added later.

2015-03-24  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/imgcrop/ui.c (preparearrays): Aborts if in WCS mode and the
	wcsprm structure could not be started.

	* src/imgcrop/crop.c (firstcropmakearray): Only adds WCS headers
	if the wcsprm structure is defined.

	* lib/fitsarrayvv.c (readwcs): If any error occurs, a warning
	message will be printed and the returned pointer will be NULL.

2015-03-17  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* tests/convertt/: If libjpeg is not present, the tests will be
	skipped.

	* src/convertt/: libjpeg is now optional.

	* configure.ac: Changed libjpeg to an optional requirement. So if
	it is not available, Gnuastro can still be built.

2015-03-16  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convolve/ui.c (preparearrays): The flip parts was missing a
	-1.

	* doc/gnuastro.texi: Changed all `gnuastro' occurrences in the
	text to `Gnuastro'.

2015-03-14  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convolve/convolve.c: Added frequency domain convolution.

2015-03-12  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mkprof/ui.c (setparams): Added condition for no output given.

	* src/mkprof/astmkprof.conf: Removed output.

	* src/imgcrop/ui.c (sanitycheck): Moved check of reentrancy in
	cfitsio to the end so if numthreads is set to 1, there is no
	problem.

	* src/convertt/ui.c (sanitycheck): Added check if output is not set.

	* src/convertt/astconvertt.conf: Removed output.

	* lib/spatialconvolve.c: First version complete.

	* configure.ac: Removed sqrt and pthread tests (they are done by
	Gnulib). Added the AX_PTHREAD macro from Autoconf archives.

2015-03-11  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convolve/: Adding new functions and steps.

	* ./: Copyright transferred to the FSF. Copyright notices in all
	files changed.

2015-03-10  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* tests/imgcrop/*.sh: Set --numthreads=1 for all the tests so if
	CFITSIO is not installed with reentrancy, there is no failures.

	* tests/Makefile.am: Made the fitstopdf result conditional on if
	GPL GhostScript is installed.

	* include/astrthreads.c: Removed the old function and structure
	for replacing the pthread_barrier type and functions that was copy
	and pasted from another webpage and replaced it with my own
	implementation.

	* configure.ac: bug report email set. pthread_barrier checked. GPL
	GhostScript checked.

2015-03-09  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* include/astrthreads.h: Added a temporary function so the
	pthread_barrier type and functions can be run on systems that
	don't support it. I have contacted the author and it will only
	remain if he clarifies the license. I have also asked the Gnulib
	people to try to include it so this issue can be completely fixed.

	* configure.ac: Added checks for nproc and gs along with warnings.

2015-03-02  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convolve/: Work started on Convolve.

	* lib/fitsarrayvv.c: Changed array types from intXX_t to short,
	long and LONGLONG. Unfortuantely this is how CFITSIO works.

2015-02-22  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* doc/gnuastro.texi: Added index, changed "Science and its
	software".

2015-02-20  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* doc/gnuastro.texi: Removed list of programs at first, added a
	programs index. Added an examples chapter along with some one line
	examples of each program. Moved the Why C and design philosophy
	subsections to the Developing chapters.

	* src: All 'error' functions are now called with a string literal
	and not a string variable. Also all 'system' function calls now
	check the return value.

	* lib: Similar to above.

	* include: similar to above.

2015-02-18  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* lib/Makefile.am: Changed all static libraries to libtool static
	libraries.

	* doc/gnuastro.texi: Updated.

	* configure.ac: Added Libtool checks. Corrected cfitsio and wcslib
	dependencies and removed FFTW as a dependency.

2015-02-17  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convertt/eps.c: Functions for binary image added.

	* lib/fitsarrayvv.c (nameisfits): Check length.

	* doc/gnuastro.texi (Internal libraries): Removed details of
	libraries.

	* README: Details removed.

2015-02-16  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* lib/statistics.c (dminmax): Works with NAN values too.
	(fminmax): Similar to dminmax.

	* doc/gnuastro.texi (ConvertType): Updated.

2015-02-13  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convertt/args.h (argp_options): `convert` changed to
	`change`. Since the program name is also convert this could cause
	confusions.

	* doc/gnuastro.texi (Invoking astconvertt): Option explanations.

	* src/convertt/jpeg.c (savejpeg): Corrected the pixel ordering.

	* src/convertt/convertt.c (doubleto8bit): Find minimum and maximum
	for all colors to set the scale, not just one color.

	* lib/fitsarrayvv.c (arraytofitsimg): Will not remove comments.

	* include/fixedstringmacros.h (SHORTCOPYRIGHT): Corrected year.

	* lib/fitsarrayvv.c (nameisfits): Dot no longer included.
	(nameisfitssuffix): Added.
	(changetype): Corrected input and output pointers.

	* doc/gnuastro.texi (ConvertType): Added explanations.
	(Future updates): Chapter removed.

2015-02-11  Mohammad Akhlaghi  <mohammad@akbari>

	* src/convertt/ui.c (preparearrays): Added.

	* src/convertt/jpeg.c (preparejpeg): Added.

	* doc/gnuastro.texi (Files): Added chapter
	(ConvertType): Added section
	(FileInfo): Added section

2015-02-08  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/convertt: Started working on ConvertType.

	* lib/checkset.c (intsmallerequalto): Function Added.

	* include/fixedstringmacros.h (ASTRUTILSBIBTEX): Corrected article
	name

	* include/checkset.h: Added intsmallerequalto.

2015-01-25  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* ./*: In all files, the name `AstrUtils` was changed to
	`gnuastro` and the `astr` prefix was changed to `ast`.

2015-01-20  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* tests/imgcrop/makerandomcat.py: Removed, because now the points
	are very specific.

	* tests/imgcrop/*.sh: Corrected the inputs to the outputs of
	MakeProfiles tests.

	* tests/Makefile.am (TESTS): Added tests for MakeProfiles.

	* Makefile.am (EXTRA_DIST): Moved the distribution files for each
	folder to the Makefile.am in that folder.

2015-01-19  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mkprof/ui.c: Steps for reading and checking WCS parameters
	added.

	* src/mkprof/oneprofile.c (ispsf): Added for a fixed place to
	check if a profile is a PSF.
	(makeoneprofile): Finding mkp->xc and mkp->yc moved here.

	* src/mkprof/mkprof.c (preparewcs): Added.
	(build): Removed finding mkp->xc and mkp->yc.

	* src/mkprof/args.h (argp_option): Added WCS related options.

	* src/imgcrop/imgcrop.c (imgcrop): Number of barriers, corrected
	for when the number of jobs was less than the number of threads.

	* lib/fitsarrayvv.c (addwcstoheader): Changed the WCS structure to
	the WCS header string as input.
	(arraytofitsimg): Convert the WCS structure and remove the
	comments CFITSIO in here.
	(atofcorrectwcs): Added.

	* doc/astrutils.texi: Updated.

2015-01-18  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mkprof/mkprof.c (writelog): Added.
	(write): Completed.

	* src/mkprof/args.h (arg_option): Added `--nomerged`.

	* lib/txtarrayvv.c (doformatting): Added option to use `f` in
	printf or `g`.

2015-01-16  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mkprof/mkprof.c (builtqueue_addempty): Added.
	(saveindividual): Added.
	(build): Is working until the profile is built.

	* src/mkprof/ellipse.h: Function taken to `box.h`.

	* src/mkprof/ellipse.c: Function taken to `box.c`.

	* src/mkprof/args.h (argp_option): added `--numrandom`, changed
	`mginimg` to `psfinimg`.

	* src/imgcrop/main.h (imgcropparams): iwidth is now a 2 element
	array.

	* src/imgcrop/crop.c: Removed `borderfromcenter` and
	`correctflpixels` to `lib/box.c`.

	* lib/stats.h: Changed to `statistics.h`, all non-used functions
	removed.

	* lib/arraymanip.c: Removed all non-used functions.

	* include/stats.h: Changed to `statistics.h` and all non-used
	functions removed.

	* include/fixedstringmacros.h (ASTRUTILSBIBTEX): Added.

	* include/commonargs.h (argp_option): Added `--cite` option and
	added the `main.h` and `cite.h` header for each program to use
	their names.

	* include/checkset.h: function name `nameiswritable` is changed to
	dir0file1 which is much more descriptive.

	* include/arraymanip.h: Removed all the non-used functions from
	the past. New functions will be added as they are needed.

	* doc/astrutils.texi: Updated.

2015-01-13  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mkprof/ui.c (preparearrays): Added.
	(setparams): numthreads initialized to configured value.

	* src/mkprof/mkprof.c (build): Added.
	(write): Added.
	(mkprof): Parallel jobs configured.

	* src/mkprof/ellipse.c: Added

	* src/mkprof/args.h (argp_option): Changed psfprofsinimg to mginimg.

	* src/imgcrop/imgcrop.c (imgcrop): Used attrbarrierinit.

	* lib/astrthreads.c (attrbarrierinit): Added.

	* doc/astrutils.texi: Updated.

2015-01-12  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/imgcrop/imgcrop.c: Using pthread_barrier_wait for
	synchronizing threads instead of the mutexes and conditional
	variables before.

	* lib/txtarrayvv.c: When the value couldn't be read as a number,
	it would be saved as the lowest possible double value. Now it will
	be saved as a NaN.

	* lib/fitsarrayvv.c (nultovalue): Convert blank values in images
	to a given values.
	(changetype): Change the type of an image.

	* lib/checkset.c (nameisawritablefile): Corrected to accurately
	check if the given name is usable as output.

	* lib/arraymanip.c (converttofloat): Removed conversion
	functions. These were mainly for converting a FITS image type to
	the desired type. Now there is one function in fitsarrayvv.c which
	will do the conversion.

	* include/checkset.h (CHECKCOLINCAT): Added to check column number
	and all values within a column.

	* doc/astrutils.texi: Updated the text, changing names and
	explanations.

	* configure.ac: Changed MockGals, mockgals, name to MakeProfiles,
	mkprof.

	* Makefile.am (EXTRA_DIST): Moved the library header files to the
	Makefile.am in lib/.

2015-01-06  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* src/mockgals/args.h (parse_opt): Removed the check below.

	* src/imgcrop/args.h (parse_opt): Removed the check below.

	* include/commonargs.h (cparse_opt): Added check for not calling
	`--setdirconf` and `--setusrconf` together.

2015-01-05  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* doc/formath.texi: Added. A set of macros to write equations
	nicely in TeX, HTML (using MathJax).

	* src/imgcrop/astrimgcrop.def: renamed to
	src/imgcrop/astrimgcrop.conf.

	* lib/defaults.c: renamed to include/configfiles.c.

	* lib/checkset.c (stringhasspace): Function added.

	* include/fixedstringmacros.h (SHORTCOPYRIGHT): 2015 added.
	(MOREHELPINFO): Corrected info explanation in help output.

	* include/defaults.h: renamed to include/configfiles.h

	* include/commonparams.h (commonparams): Similar to the change in
	commonargs.h.

	* include/commonargs.h (argp_option): `--dirdefaults` and
	`--userdefaults` changed to `--setdirconf` and `--setusrconf`.

	* doc/astrutils.texi: Included formath.texi to display math
	equations, updates to the text.

	* doc/Makefile.am (headers): Used a shell '*' instead of calling
	each program separately. This was enabled with the new file
	structure.

	* configure.ac: Changed all default names to configure for a
	configuration file, not a default file (only name).

	* Makefile.am: MockGals conditional compilation added.

2014-12-30  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	* tests/basicchecks.sh: New file (common tests for all tests).

	* tests/Makefile.am (AM_TESTS_ENVIRONMENT): Corrected test
	environment.

	* src/imgcrop/ui.c (setparams): Moved all similar actions to the
	CHECKSETDEFAULTS macro in defaults.h

	* src/imgcrop/Makefile.am (AM_CPPFLAGS): New (previously in
	AM_CFLAGS).

	* lib/defaults.c (addhomedir): Now returns char *.
	(writelocaldefaultstop): Informs the user of how to make the
	needed directory with `make -p`.

	* include/defaults.h (SAVE_LOCAL_DEFAULTS): changed addhomedir.
	(CHECKSETDEFAULTS): A new macro to read defaults.
	(END_OF_NOTSET_REPORT): Added some extra information.

	* doc/astrutils.texi: A lot of updates in the text! Listing them
	all would be too much!

	* configure.ac: `--with-numthreads` and `--enable-progname` were
	created along with all their necessary checks.

	* Makefile.am: Set conditional subdirectories. Added
	`basicchecks.sh` to the files to be distributed.

2014-12-28  Mohammad Akhlaghi  <akhlaghi@gnu.org>

	GNU Astronomical Utilities created with the ImageCrop as the first
	package. Other packages will be added in the next few days.
